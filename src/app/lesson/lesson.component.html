<article [lang]="lesson()?.language">
    <section>
        <div class="flex flex-col gap-1 p-2">
            @if (lesson()?.videoUrl) {
            <div class="-ml-2 -mr-2">
                <app-play-video [videoUrl]="lesson()?.videoUrl"></app-play-video>
            </div>
            }
            @else {
            <section class="p-4 mx-auto my-2 rounded-lg reading">
                <img class="mx-auto rounded-lg" [ngSrc]="imageUrl()" alt="cover image" width="400" height="400"
                    priority>
            </section>
            }

            <section class="flex flex-col flex-wrap p-4 mb-2 rounded-lg reading">
                <div #fullText translate="no" class="max-h-[60vh] overflow-y-auto">
                    <h2 class="m-0 font-bold text-center">{{lesson()?.title}}</h2>
                    <div class="flex flex-row flex-wrap justify-around gap-1">
                        @if(audioUrl()){
                        <app-play-button #playButton [audioUrl]="audioUrl()"></app-play-button>
                        }
                        <button type="button" class="flex items-center sm:w-fit button"
                            (click)="openLanguageReactor()">Read in Language Reactor</button>
                    </div>
                    <div id='full-text' class="full-text" [innerHTML]="(lesson()?.content || '') | markdown | async">
                    </div>
                </div>
                <p class="mt-2 text-sm">
                    Tags:
                    {{lesson()?.tags}}
                </p>
            </section>
            <section class="p-4 rounded-lg reading">
                <h2 class="mb-1 text-center">Line-By-Line</h2>
                @if (isChrome()) {
                <div class="w-full p-1 m-1 text-center bg-yellow-200 rounded-lg" translate="yes">
                    Choose translate from the browser menu to get bilingual texts. You can click on a sentence to hear
                    it.
                    เลือกแปลจากเมนูเบราว์เซอร์เพื่อรับข้อความสองภาษา คุณสามารถคลิกที่ประโยคเพื่อฟังได้
                </div>
                }
                @else {
                <div class="w-full p-1 m-1 text-center bg-yellow-200 rounded-lg" translate="yes">
                    If you open this website in Chrome, you can choose translate from the browser menu to get bilingual
                    texts.
                    หากคุณเปิดเว็บไซต์นี้ใน Chrome คุณสามารถเลือกแปลจากเมนูเบราว์เซอร์เพื่อรับข้อความสองภาษาได้
                </div>
                }
                <button class="w-full p-1 m-1 button" type="button"
                    (click)="showTranslation = !showTranslation">Toggle Translations</button>
                <h2 class="m-0 font-bold text-center" translate="no">{{lesson()?.title}}</h2>
                <div [innerHTML]="(lesson()?.contentLines || '') | markdown | async" (click)="readThis($event)"
                    [ngClass]="showTranslation ? 'shown' : 'hide-translations'"
                    class="w-full"></div>

            </section>
        </div>
        <div class="flex justify-center py-1">
            <button class="button" type="button" (click)="goBack()">Back</button>
        </div>
    </section>
</article>